# 🎱 쿠버네티스 기반 GitOps 구축하기

---

# 1. Git 시스템의 이해

## GitOps의 이해
- GitOps는 소프트웨어 개발 및 인프라스트럭처 관리의 방법론 중 하나
- Git을 중심으로 인프라스트럭처 및 애플리케이 배포를 자동화 하는 접근 방식
- 지속적 통합/지속적 배포(CI/CD)와 결합되어 개발 및 운영 업무를 효율적으로 관리, 기존의 운영 및 개발 프로세스를 혁신적으로 개선하는 데 도움이 됨

### Git
- 버전관리, 협업에 사용 됨
- Source, Infra, Container 형상 등 배포 자동화를 이루기 위한 소스 코드의 형상 관리를 위함

## 버전 제어 시스템
- 변경 사항 기록
- 여러 사람이 동시에 작업

1) 로컬 버전 시스템
   - 파일에 대한 모든 변경 사항을 로컬에 저장
   - 모든 패치를 합산하여 특정 시점의 파일 모양을 만듦
2) 중앙 집중식 버전 제어 시스템
   - 로컬 버전 쓰다가 '협업'해야 한다는 문제 발생
   - 버전이 관리되는 모든 파일이 포함된 단일 서버와 중앙 서버에서 파일을 체크아웃하는 여러 클라이언트가 존재
   - 클라이언트가 원격 DB에 붙어서 파일 내려받아서 작업했다가 작업 끝나면 올리는 거~
3) 분산 버전 제어 시스템
   - 파일의 최신 스냅샷만 체크아웃하는 것이 아니라 전체 히스토리를 포함하여 리포지토리를 완전히 미러링
   - 서버가 죽어도 클라이언트 리포지토리를 서버에 복사하여 복원 가능
   - 원격 리포지토리 여러 개 보유 가능, 여러 그룹과 동시 작업 가능
   - 여러 유형의 워크플로우 설정 가능

## Git 시스템의 특징

- 다른 VCS 시스템
  - 변경이 될 때 변경점만 저장함 -> 해당 파일 사용 시 변경점을 취합하여 나타냄
- Git
  - 모든 파일이 해당 순간에 어떻게 보이는지 사진을 찍고 스냅샷에 대한 참조 저장
  - 버전이 변경될 때마다 변경된 파일은 저장하고, 변경이 되지 않은 파일은 레퍼런스 참조식으로 저장

**다른 특징들**
1. Local 작업과 원격 작업 분리
   - Git의 대부분의 작업은 로컬 파일과 리소스만 있으면 작동
   - 전체 히스토리를 로컬 디스크에 바로 저장할 수 있음
2. 파일의 무결성
   - 모든 변경 항목은 SHA-1 매커니즘의 고유 체크섬으로 관리
     - 어떤 커밋에 대한 고유 넘버가 결정 되는 방법: 변경 사항에 대한 해쉬 알고리즘으로 만들어짐
   - 체크섬을 만들고 누군가 뒤늦게 파일을 변경해서 기존의 커밋으로 사용하기 불가능
   - 데이터를 계속 추가하는 것만 가능하고 과거의 특정 데이터만 삭제하는 것 불가능

**세 가지 영역의 이해**
1. 워킹 디렉터리
   - 프로젝트의 한 버전에 대한 단일 체크아웃
2. 스테이징 영역
   - 다음 커밋에 들어갈 내용에 대한 정보 저장
   - Git 전문 용어로 '인덱스'라고 함
3. Git 디렉터리
   - 프로젝트의 메타데이터와 오브젝트 데이터베이스를 저장하는 곳
   - 다른 컴퓨터에서 리포지토리를 복제할 때 복사 되는 부분
   - 커밋을 하면! 체크섬이 생성되어 깃 디렉터리에 저장 된다
   - 이런 체크섬들,, 히스토리들이 저장되는 곳
